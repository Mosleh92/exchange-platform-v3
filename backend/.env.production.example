# ==============================================
# Enhanced Production Environment Configuration - Backend
# ==============================================

# Application Configuration
NODE_ENV=production
PORT=5000
APP_NAME="پلتفرم صرافی چند‌مستأجری"
APP_VERSION=1.0.0

# Domain and URLs
DOMAIN=yourdomain.com
FRONTEND_URL=https://yourdomain.com
BACKEND_URL=https://api.yourdomain.com
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Database Configuration
MONGODB_URI=mongodb://username:password@mongodb-host:27017/exchange_platform?authSource=admin&ssl=true
MONGODB_URI_REPLICA_SET=mongodb://user:pass@host1:27017,host2:27017,host3:27017/exchange_platform?replicaSet=rs0&authSource=admin&ssl=true

# Database Security (ENHANCED)
DB_ENCRYPTION_KEY=your-db-encryption-key-here-must-be-at-least-32-characters-long
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=10000
DB_QUERY_TIMEOUT=30000
DB_SSL=true
DB_SSL_VALIDATE=true
DB_AUTH_SOURCE=admin

# Redis Configuration
REDIS_URL=redis://username:password@redis-host:6379
REDIS_HOST=redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here-minimum-8-characters
REDIS_DB=0
REDIS_TLS=true
REDIS_AUTH_PASS=your-redis-auth-password

# JWT Configuration (ENHANCED)
JWT_SECRET=your-super-secure-jwt-secret-at-least-64-characters-long-for-production
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-at-least-64-characters-long-for-production
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# API Security (NEW)
API_SECRET_KEY=your-api-secret-key-here-must-be-at-least-32-characters-long
WEBHOOK_SECRET=your-webhook-secret-here-minimum-16-characters

# Session Configuration (ENHANCED)
SESSION_SECRET=your-super-secure-session-secret-at-least-64-characters-long
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# Security Configuration (ENHANCED)
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100
RATE_LIMIT_AUTH_MAX=5
SUSPICIOUS_IPS=
BLOCKED_IPS=
TRUSTED_PROXIES=127.0.0.1,::1

# Multi-Factor Authentication (NEW)
MFA_SERVICE_NAME=Exchange Platform
MFA_ISSUER=Exchange Platform
ENABLE_MFA=true

# File Upload Security (ENHANCED)
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,application/pdf
ENABLE_FILE_UPLOAD=true
ENABLE_VIRUS_SCANNING=false
VIRUS_SCANNER_API_KEY=your-virus-scanner-api-key

# Email Configuration (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-email-password-here
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME="پلتفرم صرافی"

# Security Monitoring and Alerting (NEW)
ENABLE_SECURITY_MONITORING=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
EMAIL_ALERTS_TO=security@yourdomain.com

# Security Headers (NEW)
HSTS_MAX_AGE=31536000
CSP_REPORT_URI=https://yourdomain.com/csp-report
COOKIE_DOMAIN=.yourdomain.com
EXCHANGE_RATE_API_KEY=your-exchange-rate-api-key
EXCHANGE_RATE_BASE_URL=https://api.exchangerate-api.com/v4
NOTIFICATION_SERVICE_URL=https://your-notification-service.com
PAYMENT_GATEWAY_URL=https://your-payment-gateway.com
PAYMENT_GATEWAY_KEY=your-payment-gateway-key

# Logging
LOG_LEVEL=info
LOG_TO_FILE=true
LOG_DIR=/app/logs
LOG_MAX_SIZE=100m
LOG_MAX_FILES=14d

# Monitoring and Health
HEALTH_CHECK_ENDPOINT=/health
METRICS_ENDPOINT=/metrics
MONITORING_API_KEY=your-monitoring-api-key

# SSL/TLS
FORCE_HTTPS=true
TRUST_PROXY=true
SECURE_COOKIES=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=your-s3-access-key
BACKUP_S3_SECRET_KEY=your-s3-secret-key

# Feature Flags (ENHANCED)
ENABLE_2FA=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_AUDIT_LOGS=true
ENABLE_RATE_LIMITING=true
ENABLE_CSRF_PROTECTION=true
ENABLE_WEBSOCKETS=true
ENABLE_ENCRYPTION=true
ENABLE_INTRUSION_DETECTION=true
ENABLE_ANOMALY_DETECTION=true

# Backup and Recovery (ENHANCED)
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key-here
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=your-s3-access-key
BACKUP_S3_SECRET_KEY=your-s3-secret-key

# Compliance Settings (NEW)
DATA_RETENTION_DAYS=2555
AUDIT_LOG_RETENTION_DAYS=2555
GDPR_COMPLIANCE=true
PCI_COMPLIANCE=true

# Container Security (NEW - for Docker deployments)
CONTAINER_USER=1001
CONTAINER_GROUP=1001
SECURITY_CONTEXT=strict

# Performance
MONGODB_POOL_SIZE=10
REDIS_POOL_SIZE=10
CLUSTER_WORKERS=0

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# Analytics
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX

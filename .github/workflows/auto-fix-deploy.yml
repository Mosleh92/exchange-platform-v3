name: Auto Fix and Deploy

on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repo
      uses: actions/checkout@v3

    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '20' # تغییر بده به نسخه‌ای که پروژه‌ت می‌خواد

    - name: Install dependencies
      run: npm install

    - name: Format with Prettier
      run: |
        npm install --save-dev prettier
        npx prettier --write .

    - name: Lint with ESLint
      run: |
        npm install --save-dev eslint
        npx eslint . || true

    - name: Commit changes if modified
      run: |
        git config --global user.name 'AutoFix Bot'
        git config --global user.email 'bot@example.com'
        git diff --quiet || (git add . && git commit -m "fix: auto format/lint by bot" && git push)

    - name: Deploy to Render
      run: curl ${{ secrets.RENDER_DEPLOY_HOOK }}
            - الاسم: تحميل قطعة أثرية للبناء
  الاستخدامات: actions/upload-artifact@v4.6.2
  مع:
    # اسم القطعة الأثرية
    الاسم: # اختياري، الافتراضي هو artifact
    # ملف أو دليل أو نمط أحرف بديلة يصف ما يجب تحميله
    طريق:
    # السلوك المطلوب إذا لم يتم العثور على أي ملفات باستخدام المسار المقدم.
الخيارات المتاحة:
  تحذير: إخراج تحذير ولكن لا تفشل في تنفيذ الإجراء
  خطأ: فشل الإجراء مع ظهور رسالة خطأ
  تجاهل: لا يتم إخراج أي تحذيرات أو أخطاء، ولا يفشل الإجراء

    إذا لم يتم العثور على أي ملفات: # اختياري، الافتراضي هو تحذير
    # المدة التي تنتهي بعدها صلاحية القطعة الأثرية بالأيام. 0 يعني استخدام الاحتفاظ الافتراضي.
الحد الأدنى يوم واحد. الحد الأقصى ٩٠ يومًا، ما لم يتم تغييره من صفحة إعدادات المستودع.

    أيام الاحتفاظ: # اختياري
    # مستوى ضغط Zlib المُراد تطبيقه على أرشيف القطع الأثرية. تتراوح القيمة بين 0 و9: - 0: لا يوجد ضغط - 1: أفضل سرعة - 6: ضغط افتراضي (كما هو الحال في GNU Gzip) - 9: أفضل ضغط. تُؤدي المستويات الأعلى إلى ضغط أفضل، ولكنها تستغرق وقتًا أطول. بالنسبة للملفات الكبيرة التي يصعب ضغطها، يُنصح باستخدام القيمة 0 لرفع الملفات بشكل أسرع.

    مستوى الضغط: # اختياري، الافتراضي هو 6
    # إذا كانت القيمة صحيحة، فسيتم حذف أي قطعة أثرية تحمل اسمًا مطابقًا قبل تحميل قطعة أثرية جديدة. إذا كانت القيمة خاطئة، فسيفشل الإجراء إذا كانت القطعة الأثرية موجودة بالفعل بالاسم المحدد. لا يفشل الإجراء إذا لم تكن القطعة الأثرية موجودة.

    الكتابة فوق: # اختياري، الافتراضي هو خطأ
    # إذا كانت القيمة صحيحة، فسيتم تضمين الملفات المخفية في القطعة الأثرية. إذا كانت القيمة خاطئة، فسيتم استبعاد الملفات المخفية من القطعة الأثرية.

    تضمين الملفات المخفية: # اختياري، الافتراضي هو خطأ
          
